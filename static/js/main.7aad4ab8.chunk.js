(this["webpackJsonphw-08-phonebook-redux"]=this["webpackJsonphw-08-phonebook-redux"]||[]).push([[0],{48:function(e,t,n){e.exports=n(78)},75:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return ge}));var a=n(0),r=n.n(a),c=n(14),o=n.n(c),u=n(21),s=n(22),l=n(26),i=n(25),m=n(7),b=n(1),f={registerRequest:Object(b.b)("register/request"),registerSuccess:Object(b.b)("register/success"),registerError:Object(b.b)("register/error"),loginRequest:Object(b.b)("login/request"),loginSuccess:Object(b.b)("login/success"),loginError:Object(b.b)("login/error"),logOutRequest:Object(b.b)("logOut/request"),logOutSuccess:Object(b.b)("logOut/success"),logOutError:Object(b.b)("logOut/error"),getCurrentUserRequest:Object(b.b)("getCurrentUser/request"),getCurrentUserSuccess:Object(b.b)("getCurrentUser/success"),getCurrentUserError:Object(b.b)("getCurrentUser/error"),fetchContactsRequest:Object(b.b)("fetchContacts/request"),fetchContactsSuccess:Object(b.b)("fetchContacts/success"),fetchContactsError:Object(b.b)("fetchContacts/error"),addContactRequest:Object(b.b)("addContact/request"),addContactSuccess:Object(b.b)("addContact/success"),addContactError:Object(b.b)("addContact/error"),removeContactRequest:Object(b.b)("removeContact/request"),removeContactSuccess:Object(b.b)("removeContact/success"),removeContactError:Object(b.b)("removeContact/error"),filter:Object(b.b)("FILTER",(function(e){return{payload:{value:e}}})),toggleMounted:Object(b.b)("TOGGLE_MOUNTED",(function(e){return{payload:{value:e}}})),toggleAlertVisibility:Object(b.b)("TOGGLE_ALERT_VISIBILITY",(function(e){return{payload:{value:e}}})),toggleAlertMessage:Object(b.b)("TOGGLE_ALERT_MESSAGE",(function(e){return{payload:{value:e}}}))},d=n(11),g=n.n(d),p=function(e){g.a.defaults.headers.common.Authorization="Bearer ".concat(e)},E=function(){g.a.defaults.headers.common.Authorization=""},O={registerUser:function(e){return function(t){t(f.registerRequest());var n=e.name,a=e.email,r=e.password;g.a.post("/users/signup",{name:n,email:a,password:r}).then((function(e){p(e.data.token),t(f.registerSuccess(e.data))})).catch((function(e){return t(f.registerError(e))}))}},loginUser:function(e){return function(t){t(f.loginRequest());var n=e.email,a=e.password;g.a.post("/users/login",{email:n,password:a}).then((function(e){p(e.data.token),t(f.loginSuccess(e.data))})).catch((function(e){return t(f.loginError(e))}))}},logOutUser:function(){return function(e){e(f.logOutRequest()),g.a.post("users/logout").then((function(t){E(),e(f.logOutSuccess(t.data))})).catch((function(t){return e(f.logOutError(t))}))}},getCurrentUser:function(){return function(e,t){var n=t().user.token;n&&(p(n),e(f.getCurrentUserRequest()),g.a.get("users/current").then((function(t){var a=t.data;return e(f.getCurrentUserSuccess({data:a,persistedToken:n}))})).catch((function(t){return e(f.getCurrentUserError(t))})))}}};var h=Object(m.b)(null,{onExit:O.logOutUser})((function(e){var t=e.name,n=e.onExit;return r.a.createElement("div",null,"Hello ",t,"!",r.a.createElement("button",{onClick:n},"Exit"))})),v=n(15),j=function(e){return e.isMounted},C=function(e){return e.contacts},y=function(e){return e.filter},S=function(e){return e.isAlertShown},_=function(e){return e.alertMessage},N=function(e){return e.isLoading},k=function(e){return e.user.name};var w=Object(m.b)((function(e){return{userName:k(e)}}))((function(e){return r.a.createElement("div",{className:"navbar"},r.a.createElement(v.b,{className:"navbar__link",to:"/login"},r.a.createElement("span",{className:"navbar__var"}," Login")),r.a.createElement(v.b,{className:"navbar__link",to:"/register"},r.a.createElement("span",{className:"navbar__var"}," Register")),r.a.createElement(v.b,{className:"navbar__link",to:"/contacts"},r.a.createElement("span",{className:"navbar__var"}," Contacts")),e.userName&&r.a.createElement(h,{name:e.userName}))})),L=n(4),R=n(27),q=Object(m.b)((function(e){return{isLoggedIn:k(e)}}))((function(e){var t=e.component,n=e.isLoggedIn,a=Object(R.a)(e,["component","isLoggedIn"]);return r.a.createElement(L.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(L.a,{to:"/login"})}}))})),A=Object(m.b)((function(e){return{isLoggedIn:k(e)}}))((function(e){var t=e.component,n=e.isLoggedIn,a=e.restricted,c=Object(R.a)(e,["component","isLoggedIn","restricted"]);return r.a.createElement(L.b,Object.assign({},c,{render:function(e){return n&&a?r.a.createElement(L.a,{to:"/contacts"}):r.a.createElement(t,e)}}))})),U=function(e){return r.a.createElement("div",{className:"filter"},r.a.createElement("p",{className:"filter__title"},"Find contacts by name"),r.a.createElement("input",{className:"filter__input",id:"filter",onChange:e.filterChange,value:e.filterVal}))},M=n(3),I=function(e){Object(l.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",number:""},e.handleChange=function(t){e.setState(Object(M.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.formSubmit(e.state),e.setState({name:"",number:""})},e}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"form__name"},"Name",r.a.createElement("input",{className:"form__name--input",id:"name",onChange:this.handleChange,type:"text",value:this.state.name})),r.a.createElement("label",{className:"form__number"},"Number",r.a.createElement("input",{className:"form__number--input",id:"number",onChange:this.handleChange,type:"text",value:this.state.number})),r.a.createElement("button",{className:"form__submit"},"Add contact"))}}]),n}(r.a.Component),T=n(80),x=n(79),G=function(e){var t=e.contactId,n=e.name,a=e.number,c=e.remove;return r.a.createElement("li",{className:"contact-list__item"},r.a.createElement("div",{className:"contact-list__item--cont"},r.a.createElement("span",{className:"contact-list__item--span"},n),r.a.createElement("span",{className:"contact-list__item--span"},a)),r.a.createElement("button",{className:"contact-list__remove",onClick:function(){c(t)}}))},V=function(e){return Object(a.useEffect)((function(){localStorage.setItem("react-hw-3",JSON.stringify(e.contacts))}),[e.contacts]),r.a.createElement(T.a,{component:"ul",className:"contact-list"},""===e.filter?e.contacts.map((function(t){return r.a.createElement(x.a,{key:t.id,timeout:250,classNames:"contact-list__item"},r.a.createElement(G,{contactId:t.id,name:t.name,number:t.number,remove:e.remove}))})):e.contacts.filter((function(t){return t.name.toLowerCase().includes(e.filter.toLowerCase())})).map((function(t){return r.a.createElement(x.a,{key:t.id,timeout:250,classNames:"contact-list__item"},r.a.createElement(G,{key:t.id,contactId:t.id,name:t.name,number:t.number,remove:e.remove}))})))},F=function(e){var t=e.isShown,n=e.info;return r.a.createElement(x.a,{timeout:250,classNames:"alert",in:t,style:{display:t?"block":"none"}},r.a.createElement("div",{className:"alert"},n))};function D(){return r.a.createElement("div",null,"Loading contacts...")}g.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var B=function(){return function(e){e(f.fetchContactsRequest()),g.a.get("/contacts").then((function(t){e(f.fetchContactsSuccess(t.data))})).catch((function(t){return e(f.fetchContactsError(t))}))}},J=function(e){return function(t){t(f.addContactRequest()),g.a.post("/contacts",e).then((function(e){return t(f.addContactSuccess(e.data))})).catch((function(e){return t(f.addContactError(e))}))}},P=function(e){return function(t){t(f.removeContactRequest()),g.a.delete("/contacts/".concat(e)).then((function(n){return t(f.removeContactSuccess(e))})).catch((function(e){return t(f.removeContactError(e))}))}},z=Object(m.b)((function(e){return{isMounted:j(e),contacts:C(e),filter:y(e),isAlertShown:S(e),alertMessage:_(e),isLoading:N(e),userName:k(e)}}),(function(e){return{onFormSubmit:function(t,n){return e(J({name:t,number:n}))},removeContact:function(t){return e(P(t))},toggleMounted:function(t){return e(f.toggleMounted(t))},handleFilter:function(t){return e(f.filter(t.target.value))},handleAlertChange:function(t){return e(f.toggleAlertMessage(t))},handleAlertVisibility:function(t){return e(f.toggleAlertVisibility(t))},loadContacts:function(){return e(B())}}}))((function(e){Object(a.useEffect)((function(){e.loadContacts()}),[]);var t=function(t){e.handleAlertChange(t),e.handleAlertVisibility(!0),setTimeout((function(){e.handleAlertVisibility(!1)}),3e3)};return r.a.createElement("div",{className:"phonebook"},r.a.createElement(x.a,{in:e.isMounted,timeout:500,classNames:"title",mountOnEnter:!0},r.a.createElement("h2",{className:"title"},"Phonebook")),r.a.createElement(I,{formSubmit:function(n){var a=n.name,r=n.number;""!==a.trim()&&""!==r.trim()?e.contacts.find((function(e){return e.name===a}))?t("You already have "+a):e.onFormSubmit(a,r):t("Name and number must be provided.")}}),e.contacts.length>1?r.a.createElement(U,{filterChange:e.handleFilter,filterVal:e.filter}):null,e.isLoading&&r.a.createElement(D,null),r.a.createElement(V,{filter:e.filter,contacts:e.contacts,remove:e.removeContact}),r.a.createElement(F,{isShown:e.isAlertShown,info:e.alertMessage}))})),Y=n(16);var H=Object(m.b)(null,(function(e){return{onRegister:function(t){return e(O.registerUser(t))}}}))((function(e){var t=Object(a.useState)(""),n=Object(Y.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),s=Object(Y.a)(u,2),l=s[0],i=s[1],m=Object(a.useState)(""),b=Object(Y.a)(m,2),f=b[0],d=b[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log(c,l,f),e.onRegister({name:c,email:l,password:f})}},r.a.createElement("label",null,"Login:",r.a.createElement("input",{type:"text",name:"name",value:c,onChange:function(e){return o(e.target.value)}})),r.a.createElement("label",null,"Email:",r.a.createElement("input",{type:"email",name:"email",value:l,onChange:function(e){return i(e.target.value)}})),r.a.createElement("label",null,"Password:",r.a.createElement("input",{type:"password",name:"password",value:f,onChange:function(e){return d(e.target.value)}})),r.a.createElement("button",{type:"submit"},"Register"))}));var K,Q,W,X=Object(m.b)(null,(function(e){return{onLogin:function(t){return e(O.loginUser(t))}}}))((function(e){var t=Object(a.useState)(""),n=Object(Y.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),s=Object(Y.a)(u,2),l=s[0],i=s[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onLogin({email:c,password:l})}},r.a.createElement("label",null,"Email:",r.a.createElement("input",{type:"email",name:"email",value:c,onChange:function(e){return o(e.target.value)}})),r.a.createElement("label",null,"Password:",r.a.createElement("input",{type:"password",name:"password",value:l,onChange:function(e){return i(e.target.value)}})),r.a.createElement("button",{type:"submit"},"Login"))})),Z=(n(75),function(e){Object(l.a)(n,e);var t=Object(i.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(w,null),r.a.createElement(L.d,null,r.a.createElement(q,{path:"/contacts",component:z}),r.a.createElement(A,{restricted:!0,path:"/register",component:H}),r.a.createElement(A,{restricted:!0,path:"/login",component:X}),r.a.createElement(L.b,{path:"/",exact:!0},r.a.createElement(L.a,{to:"/login"}))))}}]),n}(r.a.Component)),$=Object(m.b)(null,(function(e){return{onGetCurrentUser:function(){return e(O.getCurrentUser())}}}))(Z),ee=n(8),te=n(46),ne=Object(b.c)([],(K={},Object(M.a)(K,f.fetchContactsSuccess,(function(e,t){return t.payload})),Object(M.a)(K,f.addContactSuccess,(function(e,t){return[].concat(Object(te.a)(e),[t.payload])})),Object(M.a)(K,f.removeContactSuccess,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),K)),ae=Object(b.c)(!1,(Q={},Object(M.a)(Q,f.fetchContactsRequest,(function(){return!0})),Object(M.a)(Q,f.fetchContactsSuccess,(function(){return!1})),Object(M.a)(Q,f.fetchContactsError,(function(){return!1})),Q)),re=Object(b.c)("",Object(M.a)({},f.filter,(function(e,t){return t.payload.value}))),ce=Object(b.c)(!1,Object(M.a)({},f.toggleMounted,(function(e,t){return t.payload.value}))),oe=Object(b.c)(!1,Object(M.a)({},f.toggleAlertVisibility,(function(e,t){return t.payload.value}))),ue=Object(b.c)("",Object(M.a)({},f.toggleAlertMessage,(function(e,t){return t.payload.value}))),se=Object(b.c)({name:null,email:null,token:null},(W={},Object(M.a)(W,f.registerSuccess,(function(e,t){return{name:t.payload.user.name,email:t.payload.user.email,token:t.payload.token}})),Object(M.a)(W,f.loginSuccess,(function(e,t){return{name:t.payload.user.name,email:t.payload.user.email,token:t.payload.token}})),Object(M.a)(W,f.logOutSuccess,(function(){return{name:null,email:null,token:null}})),Object(M.a)(W,f.getCurrentUserSuccess,(function(e,t){return{name:t.payload.data.name,email:t.payload.data.email,token:t.payload.persistedToken}})),W)),le=n(24),ie=n(44),me={key:"user",storage:n.n(ie).a,whitelist:["token"]},be=Object(le.a)(me,se),fe=Object(ee.c)({contacts:ne,filter:re,isMounted:ce,isAlertShown:oe,alertMessage:ue,isLoading:ae,user:be}),de=n(45),ge=Object(b.a)({reducer:fe}),pe=Object(le.b)(ge);o.a.render(r.a.createElement(m.a,{store:ge},r.a.createElement(de.a,{loading:null,persistor:pe},r.a.createElement($,null))),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.7aad4ab8.chunk.js.map