(this["webpackJsonphw-08-phonebook-redux"]=this["webpackJsonphw-08-phonebook-redux"]||[]).push([[0],{44:function(e,t,n){e.exports=n(72)},71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),o=n.n(c),u=n(21),l=n(22),s=n(25),i=n(24),m=n(10),b=n(1),f={registerRequest:Object(b.b)("register/request"),registerSuccess:Object(b.b)("register/success"),registerError:Object(b.b)("register/error"),loginRequest:Object(b.b)("login/request"),loginSuccess:Object(b.b)("login/success"),loginError:Object(b.b)("login/error"),logOutRequest:Object(b.b)("logOut/request"),logOutSuccess:Object(b.b)("logOut/success"),logOutError:Object(b.b)("logOut/error"),fetchContactsRequest:Object(b.b)("fetchContacts/request"),fetchContactsSuccess:Object(b.b)("fetchContacts/success"),fetchContactsError:Object(b.b)("fetchContacts/error"),addContactRequest:Object(b.b)("addContact/request"),addContactSuccess:Object(b.b)("addContact/success"),addContactError:Object(b.b)("addContact/error"),removeContactRequest:Object(b.b)("removeContact/request"),removeContactSuccess:Object(b.b)("removeContact/success"),removeContactError:Object(b.b)("removeContact/error"),filter:Object(b.b)("FILTER",(function(e){return{payload:{value:e}}})),toggleMounted:Object(b.b)("TOGGLE_MOUNTED",(function(e){return{payload:{value:e}}})),toggleAlertVisibility:Object(b.b)("TOGGLE_ALERT_VISIBILITY",(function(e){return{payload:{value:e}}})),toggleAlertMessage:Object(b.b)("TOGGLE_ALERT_MESSAGE",(function(e){return{payload:{value:e}}}))},d=n(12),g=n.n(d),E=function(e){g.a.defaults.headers.common.Authorization="Bearer ".concat(e)},p=function(){g.a.defaults.headers.common.Authorization=""},h={registerUser:function(e){return function(t){t(f.registerRequest());var n=e.name,a=e.email,r=e.password;g.a.post("/users/signup",{name:n,email:a,password:r}).then((function(e){E(e.data.token),t(f.registerSuccess(e.data))})).catch((function(e){return t(f.registerError(e))}))}},loginUser:function(e){return function(t){t(f.loginRequest());var n=e.email,a=e.password;g.a.post("/users/login",{email:n,password:a}).then((function(e){E(e.data.token),t(f.loginSuccess(e.data))})).catch((function(e){return t(f.loginError(e))}))}},logOutUser:function(){return function(e){e(f.logOutRequest()),g.a.post("users/logout").then((function(t){p(),e(f.logOutSuccess(t.data))})).catch((function(t){return e(f.logOutError(t))}))}}};var O=Object(m.b)(null,{onExit:h.logOutUser})((function(e){var t=e.name,n=e.onExit;return r.a.createElement("div",null,"Hello ",t,"!",r.a.createElement("button",{onClick:n},"Exit"))})),v=n(15),j=function(e){return e.isMounted},C=function(e){return e.contacts},y=function(e){return e.filter},S=function(e){return e.isAlertShown},_=function(e){return e.alertMessage},N=function(e){return e.isLoading},k=function(e){return e.user.name};var w=Object(m.b)((function(e){return{userName:k(e)}}))((function(e){return r.a.createElement("div",{className:"navbar"},r.a.createElement(v.b,{className:"navbar__link",to:"/login"},r.a.createElement("span",{className:"navbar__var"}," Login")),r.a.createElement(v.b,{className:"navbar__link",to:"/register"},r.a.createElement("span",{className:"navbar__var"}," Register")),r.a.createElement(v.b,{className:"navbar__link",to:"/contacts"},r.a.createElement("span",{className:"navbar__var"}," Contacts")),e.userName&&r.a.createElement(O,{name:e.userName}))})),A=n(3),R=function(e){return r.a.createElement("div",{className:"filter"},r.a.createElement("p",{className:"filter__title"},"Find contacts by name"),r.a.createElement("input",{className:"filter__input",id:"filter",onChange:e.filterChange,value:e.filterVal}))},L=n(4),q=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",number:""},e.handleChange=function(t){e.setState(Object(L.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.formSubmit(e.state),e.setState({name:"",number:""})},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"form__name"},"Name",r.a.createElement("input",{className:"form__name--input",id:"name",onChange:this.handleChange,type:"text",value:this.state.name})),r.a.createElement("label",{className:"form__number"},"Number",r.a.createElement("input",{className:"form__number--input",id:"number",onChange:this.handleChange,type:"text",value:this.state.number})),r.a.createElement("button",{className:"form__submit"},"Add contact"))}}]),n}(r.a.Component),M=n(74),I=n(73),x=function(e){var t=e.contactId,n=e.name,a=e.number,c=e.remove;return r.a.createElement("li",{className:"contact-list__item"},r.a.createElement("div",{className:"contact-list__item--cont"},r.a.createElement("span",{className:"contact-list__item--span"},n),r.a.createElement("span",{className:"contact-list__item--span"},a)),r.a.createElement("button",{className:"contact-list__remove",onClick:function(){c(t)}}))},T=function(e){return Object(a.useEffect)((function(){localStorage.setItem("react-hw-3",JSON.stringify(e.contacts))}),[e.contacts]),r.a.createElement(M.a,{component:"ul",className:"contact-list"},""===e.filter?e.contacts.map((function(t){return r.a.createElement(I.a,{key:t.id,timeout:250,classNames:"contact-list__item"},r.a.createElement(x,{contactId:t.id,name:t.name,number:t.number,remove:e.remove}))})):e.contacts.filter((function(t){return t.name.toLowerCase().includes(e.filter.toLowerCase())})).map((function(t){return r.a.createElement(I.a,{key:t.id,timeout:250,classNames:"contact-list__item"},r.a.createElement(x,{key:t.id,contactId:t.id,name:t.name,number:t.number,remove:e.remove}))})))},V=function(e){var t=e.isShown,n=e.info;return r.a.createElement(I.a,{timeout:250,classNames:"alert",in:t,style:{display:t?"block":"none"}},r.a.createElement("div",{className:"alert"},n))};function U(){return r.a.createElement("div",null,"Loading contacts...")}g.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var G=function(){return function(e){e(f.fetchContactsRequest()),g.a.get("/contacts").then((function(t){e(f.fetchContactsSuccess(t.data))})).catch((function(t){return e(f.fetchContactsError(t))}))}},F=function(e){return function(t){t(f.addContactRequest()),g.a.post("/contacts",e).then((function(e){return t(f.addContactSuccess(e.data))})).catch((function(e){return t(f.addContactError(e))}))}},D=function(e){return function(t){t(f.removeContactRequest()),g.a.delete("/contacts/".concat(e)).then((function(n){return t(f.removeContactSuccess(e))})).catch((function(e){return t(f.removeContactError(e))}))}},B=Object(m.b)((function(e){return{isMounted:j(e),contacts:C(e),filter:y(e),isAlertShown:S(e),alertMessage:_(e),isLoading:N(e),userName:k(e)}}),(function(e){return{onFormSubmit:function(t,n){return e(F({name:t,number:n}))},removeContact:function(t){return e(D(t))},toggleMounted:function(t){return e(f.toggleMounted(t))},handleFilter:function(t){return e(f.filter(t.target.value))},handleAlertChange:function(t){return e(f.toggleAlertMessage(t))},handleAlertVisibility:function(t){return e(f.toggleAlertVisibility(t))},loadContacts:function(){return e(G())}}}))((function(e){var t=Object(A.g)();Object(a.useEffect)((function(){e.userName?(e.loadContacts(),e.toggleMounted(!0)):t.replace("/login")}),[]),Object(a.useEffect)((function(){e.userName||t.replace("/login")}),[e.userName]);var n=function(t){e.handleAlertChange(t),e.handleAlertVisibility(!0),setTimeout((function(){e.handleAlertVisibility(!1)}),3e3)};return r.a.createElement("div",{className:"phonebook"},r.a.createElement(I.a,{in:e.isMounted,timeout:500,classNames:"title",mountOnEnter:!0},r.a.createElement("h2",{className:"title"},"Phonebook")),r.a.createElement(q,{formSubmit:function(t){var a=t.name,r=t.number;""!==a.trim()&&""!==r.trim()?e.contacts.find((function(e){return e.name===a}))?n("You already have "+a):e.onFormSubmit(a,r):n("Name and number must be provided.")}}),e.contacts.length>1?r.a.createElement(R,{filterChange:e.handleFilter,filterVal:e.filter}):null,e.isLoading&&r.a.createElement(U,null),r.a.createElement(T,{filter:e.filter,contacts:e.contacts,remove:e.removeContact}),r.a.createElement(V,{isShown:e.isAlertShown,info:e.alertMessage}))})),J=n(16);var P=Object(m.b)(null,(function(e){return{onRegister:function(t){return e(h.registerUser(t))}}}))((function(e){var t=Object(a.useState)(""),n=Object(J.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),l=Object(J.a)(u,2),s=l[0],i=l[1],m=Object(a.useState)(""),b=Object(J.a)(m,2),f=b[0],d=b[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log(c,s,f),e.onRegister({name:c,email:s,password:f})}},r.a.createElement("label",null,"Login:",r.a.createElement("input",{type:"text",name:"name",value:c,onChange:function(e){return o(e.target.value)}})),r.a.createElement("label",null,"Email:",r.a.createElement("input",{type:"email",name:"email",value:s,onChange:function(e){return i(e.target.value)}})),r.a.createElement("label",null,"Password:",r.a.createElement("input",{type:"password",name:"password",value:f,onChange:function(e){return d(e.target.value)}})),r.a.createElement("button",{type:"submit"},"Register"))}));var z,Y,H,K=Object(m.b)(null,(function(e){return{onLogin:function(t){return e(h.loginUser(t))}}}))((function(e){var t=Object(a.useState)(""),n=Object(J.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),l=Object(J.a)(u,2),s=l[0],i=l[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onLogin({email:c,password:s})}},r.a.createElement("label",null,"Email:",r.a.createElement("input",{type:"email",name:"email",value:c,onChange:function(e){return o(e.target.value)}})),r.a.createElement("label",null,"Password:",r.a.createElement("input",{type:"password",name:"password",value:s,onChange:function(e){return i(e.target.value)}})),r.a.createElement("button",{type:"submit"},"Login"))})),Q=(n(71),function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(w,null),r.a.createElement(A.d,null,r.a.createElement(A.b,{path:"/contacts"},r.a.createElement(B,null)),r.a.createElement(A.b,{path:"/register"},r.a.createElement(P,null)),r.a.createElement(A.b,{path:"/login"},r.a.createElement(K,null)),r.a.createElement(A.b,{path:"/"},r.a.createElement(A.a,{to:"/login"}))))}}]),n}(r.a.Component)),W=n(8),X=n(42),Z=Object(b.c)([],(z={},Object(L.a)(z,f.fetchContactsSuccess,(function(e,t){return t.payload})),Object(L.a)(z,f.addContactSuccess,(function(e,t){return[].concat(Object(X.a)(e),[t.payload])})),Object(L.a)(z,f.removeContactSuccess,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),z)),$=Object(b.c)(!1,(Y={},Object(L.a)(Y,f.fetchContactsRequest,(function(){return!0})),Object(L.a)(Y,f.fetchContactsSuccess,(function(){return!1})),Object(L.a)(Y,f.fetchContactsError,(function(){return!1})),Y)),ee=Object(b.c)("",Object(L.a)({},f.filter,(function(e,t){return t.payload.value}))),te=Object(b.c)(!1,Object(L.a)({},f.toggleMounted,(function(e,t){return t.payload.value}))),ne=Object(b.c)(!1,Object(L.a)({},f.toggleAlertVisibility,(function(e,t){return t.payload.value}))),ae=Object(b.c)("",Object(L.a)({},f.toggleAlertMessage,(function(e,t){return t.payload.value}))),re=Object(b.c)({name:null,email:null,token:null},(H={},Object(L.a)(H,f.registerSuccess,(function(e,t){return{name:t.payload.user.name,email:t.payload.user.email,token:t.payload.token}})),Object(L.a)(H,f.loginSuccess,(function(e,t){return{name:t.payload.user.name,email:t.payload.user.email,token:t.payload.token}})),Object(L.a)(H,f.logOutSuccess,(function(){return{name:null,email:null,token:null}})),H)),ce=Object(W.c)({contacts:Z,filter:ee,isMounted:te,isAlertShown:ne,alertMessage:ae,isLoading:$,user:re}),oe=Object(b.a)({reducer:ce});o.a.render(r.a.createElement(m.a,{store:oe},r.a.createElement(Q,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.bc0b2468.chunk.js.map